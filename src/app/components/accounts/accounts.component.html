<div class="subscription-list">
    <h3 class="title">Account List</h3>

    <!-- Search by name -->
    <div class="filter-bar">
        <div class="filter-item">
            <i class="bi bi-search"></i>
            <input type="text" placeholder="Search by name" [(ngModel)]="searchName" (ngModelChange)="loadAccounts()" />
        </div>
    </div>

    <div *ngIf="accounts.length === 0" class="no-results">
        No accounts found.
    </div>

    <div class="subscription-card" *ngFor="let customer of accounts">
        <div class="customer-info">
            <strong>{{ customer.customer_name }}</strong>
            <small>{{ customer.email }}</small>
        </div>

        <div class="service-type">
            <span *ngIf="customer.Booking.length > 0">Cemetery Cleaning</span>
            <span *ngIf="customer.Booking.length > 0 && customer.deadPersonProfiles.length > 0">, </span>
            <span *ngIf="customer.deadPersonProfiles.length > 0">Memorial</span>
        </div>

        <div class="view-btn">
            <button (click)="goToDetail(customer)">View Details</button>
        </div>
    </div>

    <!-- Pagination -->
    <nav *ngIf="totalPages > 1">
        <ul class="pagination justify-content-center mt-3">
            <li class="page-item" [class.disabled]="page === 1">
                <button class="page-link" (click)="changePage(page - 1)">Previous</button>
            </li>

            <li class="page-item" *ngFor="let p of pagesArray()" [class.active]="p === page"
                [class.disabled]="p === '...'">
                <button class="page-link" *ngIf="p !== '...'; else dots" (click)="changePage(p)">
                    {{ p }}
                </button>
                <ng-template #dots>
                    <span class="page-link">â€¦</span>
                </ng-template>
            </li>

            <li class="page-item" [class.disabled]="page === totalPages">
                <button class="page-link" (click)="changePage(page + 1)">Next</button>
            </li>
        </ul>
    </nav>
</div>